<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<title>Fake News Detection</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid">
			<a class="navbar-brand" href="/" onclick="resetDropdown()">Fake News Detection</a>
			<div class="nav navbar-nav navbar-right" id="navbarNavAltMarkup">
				<div class="navbar-nav">
					<a class="navbar-brand" href="/" onclick="resetDropdown()">Nicholas Kheng</a>
				</div>
			</div>
		</div>
	</nav>

	<br>
	<p style=text-align:center>This is a simple Fake News Detection web application that is able to predict whether a piece or news is real or fake. </p>
	<p style=text-align:center>Select a classification model to use from the drop down menu below.</p>
	
	<div class='container'>
		<form action="/" method="POST">
			<div class="col-three-forth col-md-offset-2">
				<div class="form-group col-md-4 offset-md-4">
					<label for="selectedModel">Classification Model:</label>
					<select id="selectedModel" name="selected_model" class="form-control" required>
						<option value="" selected disabled>Select model...</option>
						<option value="svm" disabled>Support Vector Machine Model</option>
						<option value="nb" disabled>Naive Bayes Model</option>
						<option value="lr">Logistic Regression Model</option>
						<option value="knn">K-Nearest Neighbours Model</option>
						<option value="dt">Decision Tree Model</option>
					</select>
				</div>

				<br>
				<p style=text-align:center>Enter news you would like to check.</p>

				<div class="form-group text-center">
					<textarea class="form-control jTextarea mt-3" id="jTextarea'" rows="5" name="text"
					 placeholder="Input news here..." required>{{text}}</textarea>

					<br><br>
					<button class="btn btn-primary btn-outline btn-md" type="submit" name="predict">Predict</button>
				</div>
			</div>
		</form>
	</div>
	<br><br>

	{% if result %}
	<p style="text-align:center; font-size:1.5em"><strong>Prediction: {{result}}<br>Confidence Score: {{score}}</strong></p><br>
	<p style="text-align:center">Select a different model to make another prediction with the chosen model OR<br>Enter another piece of news to make a new prediction.</p>
	{% endif %}

	<script>
        // retreive previously selected model
        var selectedModel = localStorage.getItem('selectedModel');
        if (selectedModel) {
            $('#selectedModel').val(selectedModel);
        }

        // store previously selected model
        $('#selectedModel').change(function () {
            var selectedModel = $(this).val();
            localStorage.setItem('selectedModel', selectedModel);
        });

		// reset dropdown menu
		function resetDropdown() {
            $('#selectedModel').val('');
            localStorage.removeItem('selectedModel');
		}
    </script>

</body>

</html>